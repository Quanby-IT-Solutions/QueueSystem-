<div class="z-50 p-4 text-white bg-green-800 header">
  <h1 class="text-2xl font-bold">Profile Overview</h1>
</div>

<div class="flex max-w-5xl p-6 mx-auto space-x-6">
  <!-- Left Container for ID Card -->
  <div class="p-4">
    <div class="id-card-tag"></div>
    <div class="id-card-tag-strip"></div>
    <div class="id-card-hook"></div>
    <div class="relative bg-green-800 id-card-holder">

      <button class="absolute z-20 p-2 text-white bg-green-700 rounded-full top-3 left-3 hover:bg-green-600"
      (click)="editUser()">
<!-- Inline SVG Edit Icon -->
<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none">
  <path d="M20,16v4a2,2,0,0,1-2,2H4a2,2,0,0,1-2-2V6A2,2,0,0,1,4,4H8"
        stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
  <polygon fill="none" points="12.5 15.8 22 6.2 17.8 2 8.3 11.5 8 16 12.5 15.8"
        stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
</svg>
</button>

      <div class="id-card content-container" #contentContainer>
        <div class="header">
          <div class="triangle-bg-left"></div>
          <div class="triangle-bg-right"></div>
          <div class="absolute z-10 top-4 right-4">
            <img src="./assets/logo/vsu.png" alt="Company Logo" class="logo">
          </div>
        </div>
        <div class="photo">
          <img [src]="getUserProfile()" alt="User Profile" class="profile-photo" #profilePhoto>
        </div>
        <h2 class="name">{{ user.fullname }}</h2>
        <h3 class="designation">{{ user.position ?? 'Admin' }}</h3>
        <div class="info">
          <p>ID No.: <span>{{ user.employeeId ?? 'ID12345' }}</span></p>
          <p>Phone: <span>{{ user.phone ?? '+1 555-555-5555' }}</span></p>
          <p>Email: <span>{{ user.email ?? 'youremail@example.com' }}</span></p>
        </div>
        <div class="department">{{ user.department ?? 'Registrar' }}</div>
      </div>
    </div>
  </div>


  <!-- Right Side: Password Edit and Activity Logs -->
  <div class="flex-1 space-y-6" #formContainer>
    <!-- Password Edit Container -->
    <div class="p-6 bg-white rounded-lg shadow">
      <h2 class="text-lg font-bold text-green-800">Edit Password</h2>
      <form (ngSubmit)="changePassword()" class="mt-4 space-y-4">
        <div class="flex flex-col">
          <label class="text-gray-700">Current Password</label>
          <input type="password" [(ngModel)]="currentPassword" name="currentPassword" class="p-2 border border-gray-300 rounded-lg">
        </div>
        <div class="flex flex-col">
          <label class="text-gray-700">New Password</label>
          <input type="password" [(ngModel)]="newPassword" name="newPassword" class="p-2 border border-gray-300 rounded-lg">
        </div>
        <div class="flex flex-col">
          <label class="text-gray-700">Confirm New Password</label>
          <input type="password" [(ngModel)]="confirmNewPassword" name="confirmNewPassword" class="p-2 border border-gray-300 rounded-lg">
        </div>
        <button type="submit" class="w-full px-4 py-2 text-white transition bg-green-500 rounded-lg hover:bg-green-600">
          Update Password
        </button>
      </form>
    </div>

    <!-- Activity Logs Container -->
    <div class="p-6 bg-white rounded-lg shadow">
      <h2 class="text-lg font-bold text-green-800">User Activity Logs</h2>
      <ul class="mt-4 space-y-2">
        <li *ngFor="let log of userLogs" class="flex justify-between text-sm">
          <span class="text-gray-600">{{ log.date }}</span>
          <span class="text-gray-800">{{ log.activity }}</span>
        </li>
      </ul>
      <p *ngIf="userLogs.length === 0" class="mt-4 text-center text-gray-500">No recent activities found.</p>
    </div>
  </div>
</div>

<!-- Modal for Editing User Info using CreateAccountModalComponent -->
<app-create-account-modal
  *ngIf="showModal"
  [editingUser]="true"
  [user]="user"
  [divisions]="divisions"
  (closeModal)="closeModal()"
  (accountCreated)="saveUserInfo($event)">
</app-create-account-modal>
