<!-- Sidebar -->
<div
  class="h-full bg-[#22381F] text-white transition-all duration-500 ease-in-out flex flex-col shadow-lg overflow-hidden"
  [ngClass]="{
    'w-64': isExpanded,
    'w-16': !isExpanded && !isMobile,
    'fixed z-50 left-0 top-0 bottom-0': isMobile,
    '-left-64': !isExpanded && isMobile,
    'left-0': isExpanded && isMobile
  }"
>
  <!-- Sidebar Header with fixed height -->
  <div class="p-4 flex items-center justify-between border-b border-white/10 h-16">
    <div class="flex items-center space-x-3">
      <!-- Logo (hide when collapsed, header height fixed) -->
      <div
        class="bg-white rounded-full flex-shrink-0 flex items-center justify-center overflow-hidden transition-all duration-500 ease-in-out"
        [ngClass]="{
          'w-10 h-10': isExpanded,
          'w-0 h-0 opacity-0': !isExpanded
        }"
      >
        <img
          src="assets/logo/vsu.png"
          alt="Logo"
          class="w-full h-full object-contain"
        />
      </div>
      <!-- App Title (smooth transition, but header size stays consistent) -->
      <h1
        class="text-sm font-semibold leading-tight whitespace-nowrap transition-all duration-500 ease-in-out"
        [ngClass]="{
          'opacity-100 max-w-full': isExpanded,
          'opacity-0 max-w-0': !isExpanded
        }"
        style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis"
      >
        {{ appTitle }}
      </h1>
    </div>
    <!-- Hamburger Menu Toggle Button (Fixed position) -->
    <button
      (click)="toggleSidebar()"
      class="text-white focus:outline-none"
      aria-label="Toggle Sidebar"
    >
      <span class="material-icons text-2xl">menu</span>
    </button>
  </div>

  <!-- Navigation Items -->
  <ul class="flex-grow mt-4 overflow-y-auto">
    <li *ngFor="let item of menuItems; let i = index" class="mb-2 px-3">
      <a
        class="flex items-center py-2 px-3 rounded-lg transition-all duration-500 ease-in-out cursor-pointer hover:bg-[#2F4A2C]"
        [ngClass]="{ 'bg-[#2F4A2C] shadow-md': item.active }"
        (click)="setActiveItem(i)"
      >
        <span
          class="material-icons flex items-center justify-center w-6 h-6 transition-all duration-500 ease-in-out"
          [ngClass]="{
            'text-green-400': item.active,
            'text-white': !item.active
          }"
        >
          {{ item.icon }}
        </span>
        <span
          class="ml-3 whitespace-nowrap overflow-hidden transition-all duration-500 ease-in-out"
          [ngClass]="{
            'opacity-100 max-w-xs': isExpanded,
            'opacity-0 max-w-0': !isExpanded,
            'font-semibold': item.active
          }"
        >
          {{ item.title }}
        </span>
      </a>
    </li>
  </ul>

  <!-- Logout Button -->
  <div class="p-4">
    <uswagon-logout-button
      class="w-full py-2 px-3 bg-[#2F4A2C] text-white font-bold rounded-lg transition-all duration-500 ease-in-out hover:bg-[#1F3419] flex items-center justify-center"
    >
      <span class="material-icons" [ngClass]="{ 'mr-2': isExpanded }">
        logout
      </span>
      <span
        class="whitespace-nowrap overflow-hidden transition-all duration-500 ease-in-out"
        [ngClass]="{
          'opacity-100 max-w-xs': isExpanded,
          'opacity-0 max-w-0': !isExpanded
        }"
      >
        Logout
      </span>
    </uswagon-logout-button>
  </div>
</div>
