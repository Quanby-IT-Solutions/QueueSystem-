<main class="min-h-screen bg-gray-100 p-4 md:p-6 lg:p-8">
  <div class="max-w-7xl mx-auto">
    <!-- Header Section -->
    <header class="mb-6">
      <h1 class="text-3xl font-bold text-gray-900">Content Management</h1>
      <p class="mt-2 text-gray-600">Manage and customize the content displayed on Queue Displays.</p>
    </header>

    <!-- Main Card Container -->
    <div class="bg-white rounded-lg shadow-lg overflow-hidden">
      <!-- Tabs Navigation -->
      <nav *ngIf="isSuperAdmin" class="flex" role="tablist">
        <button
          *ngFor="let tab of ['registrar', 'cashier', 'accountant']"
          (click)="onTabClick(tab)"
          [ngClass]="{
            'bg-[#283c1c] text-white': selectedTab === tab,
            'bg-gray-100 text-gray-700 hover:bg-[#3c4c3a] hover:text-white': selectedTab !== tab
          }"
          class="flex-1 py-3 px-4 text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#283c1c]"
          [attr.aria-selected]="selectedTab === tab"
          role="tab"
        >
          {{ contentData[tab].title }}
        </button>
      </nav>

      <!-- Content Area -->
      <div class="p-6">
        <!-- Preview Section -->
        <section class="mb-8" aria-labelledby="preview-heading">
          <div class="flex justify-between items-center mb-4">
            <h2 id="preview-heading" class="text-2xl font-semibold text-gray-800">Preview</h2>
            <button
              (click)="editContent()"
              class="px-4 py-2 bg-[#283c1c] text-white rounded-md hover:bg-[#3c4c3a] transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#283c1c] text-sm"
            >
              Edit Content
            </button>
          </div>
          <div
            class="p-4 rounded-lg shadow-inner bg-gray-50 transition-all duration-300"
            [ngClass]="{
              'h-0 opacity-0 overflow-hidden': !contentData[selectedTab],
              'h-auto opacity-100': contentData[selectedTab]
            }"
          >
            <app-content-mod
              [logoUrl]="contentData[selectedTab]?.logoUrl"
              [backgroundType]="contentData[selectedTab]?.backgroundType"
              [backgroundColor]="contentData[selectedTab]?.backgroundColor"
              [backgroundPhotoUrl]="contentData[selectedTab]?.backgroundPhotoUrl"
              [videoUrl]="contentData[selectedTab]?.videoUrl"
              [announcementText]="contentData[selectedTab]?.announcementText"
              [notesText]="contentData[selectedTab]?.notesText"
              [tabName]="contentData[selectedTab]?.title"
              [colors]="contentData[selectedTab]?.colors"
              [widgets]="contentData[selectedTab]?.widgets"
            ></app-content-mod>
          </div>
        </section>

        <!-- Content Settings Section -->
        <section
          #contentSettings
          class="bg-white rounded-xl p-6 shadow-sm transition-all duration-300"
          [ngClass]="{
            'max-h-0 opacity-0 overflow-hidden': !isContentSettingsOpen,
            'max-h-full opacity-100 mt-6': isContentSettingsOpen
          }"
          aria-labelledby="content-settings-heading"
        >
          <h2 id="content-settings-heading" class="text-2xl font-bold text-gray-800 mb-6">Content Settings</h2>

          <!-- Two-Column Grid Layout -->
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- Left Column -->
            <div class="space-y-6">
              <!-- Media Uploads -->
              <div class="bg-gray-50 p-4 rounded-lg shadow-md">
                <!-- Toggle Header -->
                <div class="flex justify-between items-center cursor-pointer" (click)="toggleSection('mediaUploads')">
                  <h3 class="text-lg font-semibold text-gray-800">Media Uploads</h3>
                  <svg
                    [ngClass]="{ 'transform rotate-180': isMediaUploadsOpen }"
                    class="w-5 h-5 text-gray-600 transition-transform duration-200"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg"
                    aria-hidden="true"
                  >
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                  </svg>
                </div>

                <div *ngIf="isMediaUploadsOpen" class="mt-4 space-y-4">
                  <!-- Logo Upload -->
                  <div>
                    <label for="logo-upload" class="block text-sm font-medium text-gray-800 mb-1">Upload Logo</label>
                    <div class="flex items-center">
                      <input
                        type="file"
                        id="logo-upload"
                        accept="image/png, image/jpeg"
                        class="hidden"
                        (change)="onFileUpload($event, 'logo')"
                      />
                      <label
                        for="logo-upload"
                        class="inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-sm text-gray-800 hover:bg-gray-100 cursor-pointer transition-colors duration-300"
                      >
                        <svg
                          class="w-5 h-5 mr-2 text-gray-600"
                          fill="currentColor"
                          viewBox="0 0 20 20"
                          xmlns="http://www.w3.org/2000/svg"
                          aria-hidden="true"
                        >
                          <path
                            fill-rule="evenodd"
                            d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V9.414a2 2 0 00-.586-1.414l-4.414-4.414A2 2 0 0012.586 3H4zm8 1.414L16.586 9H12a1 1 0 01-1-1V4.414z"
                            clip-rule="evenodd"
                          ></path>
                        </svg>
                        Choose File
                      </label>
                      <span
                        class="ml-2 text-sm"
                        [ngClass]="{
                          'text-gray-500': !isFilePicked('logo'),
                          'text-green-600': isFilePicked('logo')
                        }"
                      >
                        {{ getFileName('logo') || 'No file chosen' }}
                      </span>
                    </div>
                  </div>

  
                  <!-- Conditional Background Upload or Color Picker -->
                  <div *ngIf="backgroundType === 'photo'">
                    <label for="bg-photo-upload" class="block text-sm font-medium text-gray-800 mb-1">Background Photo</label>
                    <div class="flex items-center">
                      <input
                        type="file"
                        id="bg-photo-upload"
                        accept="image/png, image/jpeg, image/jpg"
                        class="hidden"
                        (change)="onFileUpload($event, 'background')"
                      />
                      <label
                        for="bg-photo-upload"
                        class="inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-sm text-gray-800 hover:bg-gray-100 cursor-pointer transition-colors duration-300"
                      >
                        <svg
                          class="w-5 h-5 mr-2 text-gray-600"
                          fill="currentColor"
                          viewBox="0 0 20 20"
                          xmlns="http://www.w3.org/2000/svg"
                          aria-hidden="true"
                        >
                          <path
                            fill-rule="evenodd"
                            d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V9.414a2 2 0 00-.586-1.414l-4.414-4.414A2 2 0 0012.586 3H4zm8 1.414L16.586 9H12a1 1 0 01-1-1V4.414z"
                            clip-rule="evenodd"
                          ></path>
                        </svg>
                        Choose File
                      </label>
                      <span
                        class="ml-2 text-sm"
                        [ngClass]="{
                          'text-gray-500': !isFilePicked('background'),
                          'text-green-600': isFilePicked('background')
                        }"
                      >
                        {{ getFileName('background') || 'No file chosen' }}
                      </span>
                    </div>
                  </div>

                  <div *ngIf="backgroundType === 'color'">
                    <label for="background-color" class="block text-sm font-medium text-gray-800 mb-1">Select Background Color</label>
                    <div class="flex items-center space-x-2">
                      <input
                        type="color"
                        id="background-color"
                        class="h-8 w-8 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#283c1c] transition-colors duration-300"
                        [(ngModel)]="backgroundColor"
                        (change)="onBackgroundColorChange($event)"
                      />
                      <span class="text-sm text-gray-800">{{ backgroundColor }}</span>
                    </div>
                  </div>

                  <!-- Video Input Method Selection -->
                  <div>
                    <span class="block text-sm font-medium text-gray-800 mb-1">Video Input</span>
                    <div class="flex items-center space-x-4">
                      <label class="inline-flex items-center">
                        <input
                          type="radio"
                          class="form-radio h-4 w-4 text-[#283c1c] transition duration-150 ease-in-out"
                          name="videoOption"
                          value="upload"
                          (change)="onVideoOptionChange('upload')"
                          [checked]="videoOption === 'upload'"
                        />
                        <span class="ml-1 text-sm text-gray-800">Upload Video</span>
                      </label>
                      <label class="inline-flex items-center">
                        <input
                          type="radio"
                          class="form-radio h-4 w-4 text-[#283c1c] transition duration-150 ease-in-out"
                          name="videoOption"
                          value="url"
                          (change)="onVideoOptionChange('url')"
                          [checked]="videoOption === 'url'"
                        />
                        <span class="ml-1 text-sm text-gray-800">YouTube URL</span>
                      </label>
                    </div>
                  </div>

                  <!-- Conditional Video Upload or YouTube URL Input -->
                  <div *ngIf="videoOption === 'upload'">
                    <label for="video-upload" class="block text-sm font-medium text-gray-800 mb-1">Upload Video</label>
                    <div class="flex items-center">
                      <input
                        type="file"
                        id="video-upload"
                        accept="video/mp4, video/webm, video/ogg"
                        class="hidden"
                        (change)="onFileUpload($event, 'video')"
                      />
                      <label
                        for="video-upload"
                        class="inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-sm text-gray-800 hover:bg-gray-100 cursor-pointer transition-colors duration-300"
                      >
                        <svg
                          class="w-5 h-5 mr-2 text-gray-600"
                          fill="currentColor"
                          viewBox="0 0 20 20"
                          xmlns="http://www.w3.org/2000/svg"
                          aria-hidden="true"
                        >
                          <path
                            fill-rule="evenodd"
                            d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V9.414a2 2 0 00-.586-1.414l-4.414-4.414A2 2 0 0012.586 3H4zm8 1.414L16.586 9H12a1 1 0 01-1-1V4.414z"
                            clip-rule="evenodd"
                          ></path>
                        </svg>
                        Choose File
                      </label>
                      <span
                        class="ml-2 text-sm"
                        [ngClass]="{
                          'text-gray-500': !isFilePicked('video'),
                          'text-green-600': isFilePicked('video')
                        }"
                      >
                        {{ getFileName('video') || 'No file chosen' }}
                      </span>
                    </div>
                  </div>

                  <div *ngIf="videoOption === 'url'">
                    <label for="youtube-url" class="block text-sm font-medium text-gray-800 mb-1">YouTube URL</label>
                    <input
                      type="url"
                      id="youtube-url"
                      class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-[#283c1c] transition-colors duration-300 text-sm"
                      placeholder="https://www.youtube.com/watch?v=example"
                      [(ngModel)]="youtubeUrl"
                      (input)="onYoutubeUrlChange($event)"
                    />
                    <p class="mt-1 text-xs text-gray-500">Example: https://www.youtube.com/watch?v=dQw4w9WgXcQ</p>
                  </div>
                </div>
              </div>

              <!-- Content -->
              <div class="bg-gray-50 p-4 rounded-lg shadow-md">
                <!-- Toggle Header -->
                <div class="flex justify-between items-center cursor-pointer" (click)="toggleSection('content')">
                  <h3 class="text-lg font-semibold text-gray-800">Content</h3>
                  <svg
                    [ngClass]="{ 'transform rotate-180': isContentOpen }"
                    class="w-5 h-5 text-gray-600 transition-transform duration-200"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg"
                    aria-hidden="true"
                  >
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                  </svg>
                </div>

                <div *ngIf="isContentOpen" class="mt-4 space-y-4">
                  <!-- Announcements -->
                  <div>
                    <label for="announcements" class="block text-sm font-medium text-gray-800 mb-1">Announcements</label>
                    <textarea
                      id="announcements"
                      class="w-full px-3 py-2 text-gray-800 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-[#283c1c] transition-colors duration-300 text-sm resize-none"
                      rows="3"
                      [(ngModel)]="announcementText"
                      (input)="onAnnouncementChange($event)"
                      maxlength="200"
                      placeholder="Enter announcement text"
                    ></textarea>
                    <p class="mt-1 text-xs text-gray-500">
                      {{ getRemainingChars(announcementText) }} characters remaining
                    </p>
                  </div>

                  <!-- Notes -->
                  <div>
                    <label for="notes" class="block text-sm font-medium text-gray-800 mb-1">Notes</label>
                    <textarea
                      id="notes"
                      class="w-full px-3 py-2 text-gray-800 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-[#283c1c] transition-colors duration-300 text-sm resize-none"
                      rows="3"
                      [(ngModel)]="notesText"
                      (input)="onNotesChange($event)"
                      maxlength="200"
                      placeholder="Enter notes"
                    ></textarea>
                    <p class="mt-1 text-xs text-gray-500">
                      {{ getRemainingChars(notesText) }} characters remaining
                    </p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Right Column -->
            <div class="space-y-6">
              <!-- Color Settings -->
              <div class="bg-gray-50 p-4 rounded-lg shadow-md">
                <!-- Toggle Header -->
                <div class="flex justify-between items-center cursor-pointer" (click)="toggleSection('colorSettings')">
                  <h3 class="text-lg font-semibold text-gray-800">Color Settings</h3>
                  <svg
                    [ngClass]="{ 'transform rotate-180': isColorSettingsOpen }"
                    class="w-5 h-5 text-gray-600 transition-transform duration-200"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg"
                    aria-hidden="true"
                  >
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                  </svg>
                </div>

                <div *ngIf="isColorSettingsOpen" class="mt-4 space-y-4">

                  <ng-container *ngFor="let key of colorKeys" >
                    <div>
                      <label for="text-color" class="block text-sm font-medium text-gray-800 mb-1">{{colorTitle[key]}}</label>
                      <div class="flex items-center space-x-2">
                        <input
                          type="color"
                          id="text-color"
                          class="h-8 w-8 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#283c1c] transition-colors duration-300"
                          [(ngModel)]="colors[key]"
                          (change)="onColorChange(key,$event)"
                        />
                        <span class="text-sm text-gray-800">{{ colors[key] }}</span>
                      </div>
                    </div>
                  </ng-container>
   
                  </div>
              </div>

              <!-- Widgets -->
              <div class="bg-gray-50 p-4 rounded-lg shadow-md">
                <!-- Toggle Header -->
                <div class="flex justify-between items-center cursor-pointer" (click)="toggleSection('widgets')">
                  <h3 class="text-lg font-semibold text-gray-800">Widgets</h3>
                  <svg
                    [ngClass]="{ 'transform rotate-180': isWidgetsOpen }"
                    class="w-5 h-5 text-gray-600 transition-transform duration-200"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg"
                    aria-hidden="true"
                  >
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                  </svg>
                </div>

                <div *ngIf="isWidgetsOpen" class="mt-4">
                  <!-- Widgets Selection -->
                  <div>
                    <span class="block text-sm font-medium text-gray-800 mb-1">Available Widgets</span>
                    <div class="flex flex-wrap gap-2">
                      <label class="inline-flex items-center">
                        <input
                          type="checkbox"
                          class="form-checkbox h-4 w-4 text-[#283c1c] transition duration-150 ease-in-out"
                          [(ngModel)]="widgets.weather"
                          (change)="onWidgetChange()"
                        />
                        <span class="ml-1 text-sm text-gray-800">Weather</span>
                      </label>

                      <label class="inline-flex items-center">
                        <input
                          type="checkbox"
                          class="form-checkbox h-4 w-4 text-[#283c1c] transition duration-150 ease-in-out"
                          [(ngModel)]="widgets.time"
                          (change)="onWidgetChange()"
                        />
                        <span class="ml-1 text-sm text-gray-800">Time & Date</span>
                      </label>

                      <label class="inline-flex items-center">
                        <input
                          type="checkbox"
                          class="form-checkbox h-4 w-4 text-[#283c1c] transition duration-150 ease-in-out"
                          [(ngModel)]="widgets.currency"
                          (change)="onWidgetChange()"
                        />
                        <span class="ml-1 text-sm text-gray-800">Currency Converter</span>
                      </label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Save, Reset and Cancel Buttons -->
          <div class="mt-6 flex flex-wrap justify-end space-x-2">
            <button
              (click)="toggleContentSettings()"
              class="px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 text-sm"
            >
              Cancel
            </button>
            <button
              (click)="resetToDefault()"
              class="px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-400 text-sm"
            >
              Reset
            </button>
            <button
              (click)="saveChanges()"
              class="px-4 py-2 bg-[#283c1c] text-white rounded-md hover:bg-[#3c4c3a] transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#283c1c] text-sm"
            >
              Save
            </button>
          </div>
        </section>
      </div>
    </div>
  </div>
</main>
